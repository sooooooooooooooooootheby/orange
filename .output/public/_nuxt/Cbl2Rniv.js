import{h as A}from"./BlkUVR08.js";import{h as F}from"./Bw0ZoFT5.js";import{u as B}from"./BFL6zDSq.js";import{C as G,U as I,H as M,d as v,f as O,J as g,e as C,h as e,t as d,F as S,K as D,n as N}from"#entry";function V(r){if(typeof r!="string"||!r)return"";const f=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null,m=[],h=new Map;if(f){const a=f.segment(r);for(const n of a)m.push({index:n.index,text:n.segment}),h.set(n.index,n.segment)}else{let a=0;for(const n of Array.from(r))h.set(a,n),m.push({index:a,text:n}),a+=n.length}let p=null,u=!1,o=!1,s=!1,t=!1,c=null;const w=[],$=a=>a.replace(/[&<>"']/g,n=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[n]),b=a=>{const n=[];a&&n.push(`color:${a}`),u&&n.push("font-weight:700"),o&&n.push("font-style:italic");const x=[];return s&&x.push("underline"),t&&x.push("line-through"),x.length&&n.push(`text-decoration:${x.join(" ")}`),n.length?` style="${n.join(";")}"`:""},T=a=>/^[0-9a-fA-F]$/.test(a);let l=0;const _=r.length;for(;l<_;){const a=r[l];if(a==="&"&&l+8<=_&&r[l+1]==="#"){const i=r.slice(l+2,l+8);if(/^[0-9a-fA-F]{6}$/.test(i)){c=`#${i.toLowerCase()}`,l+=8;continue}}if(a==="&"&&l+14<=_&&r[l+1]==="x"){let i=!0,k="";for(let y=0;y<6;y++){const L=r[l+2+y*2],H=r[l+3+y*2];if(L!=="&"||!T(H)){i=!1;break}k+=H}if(i){p=`#${k.toLowerCase()}`,l+=14;continue}}if(a==="&"&&l+1<_){const i=r[l+1].toLowerCase();if(["l","o","n","m","r"].includes(i)){i==="r"?(p=null,u=o=s=t=!1):i==="l"?u=!0:i==="o"?o=!0:i==="n"?s=!0:i==="m"&&(t=!0),l+=2;continue}}const n=h.get(l);if(n==null){const i=$(r[l]);w.push(`<span${b(p)}>${i}</span>`),l+=1,c=null;continue}const x=c||p;c=null;const j=$(n);w.push(`<span${b(x)}>${j}</span>`),l+=n.length}return`<span class="mc-colored">${w.join("")}</span>`}const q={key:0,class:"mx-auto mb-12 max-w-2xl"},z={class:"mb-2 flex items-center justify-between"},E={class:"text-xs text-gray-400"},J={class:"flex flex-col gap-3"},K={class:"bg-default border-default flex flex-col gap-1 rounded-lg border-1 px-3 py-2"},U={class:"flex items-center gap-2"},P=["src"],Q={class:"flex flex-col justify-center"},R=["innerHTML"],W={class:"text-sm text-gray-600"},X={class:"text-sm text-gray-600"},Y={class:"flex w-full"},Z={class:"flex w-1/5 flex-col gap-0.5"},ee={class:"flex w-1/5 flex-col gap-0.5"},se={class:"flex w-1/5 flex-col gap-0.5"},te={class:"flex w-1/5 flex-col gap-0.5"},ne={class:"flex w-1/5 flex-col gap-0.5"},le=G({__name:"guild",async setup(r){let f,m;const h=(o,s,t,c)=>o*1e3+s*.1+t*1+c*100,p=I(()=>u.value?.ranking.sort((o,s)=>s.score-o.score)),{data:u}=([f,m]=M(async()=>B("mountains",async()=>{const o=await $fetch("/api/guild");return{ranking:o.data.map(t=>({...t,score:h(t.level,t.prosperity_degree,t.money,t.member_count)})),time:o.cacheTime}})),f=await f,m(),f);return(o,s)=>g(u)?(C(),v("div",q,[e("div",z,[s[0]||(s[0]=e("span",null,"排名",-1)),e("span",E,"更新于 "+d(("handleTime"in o?o.handleTime:g(A))(g(u).time)),1)]),e("div",J,[(C(!0),v(S,null,D(g(p),(t,c)=>(C(),v("div",null,[e("div",K,[e("div",U,[e("img",{src:("handleHead"in o?o.handleHead:g(F))(t.creator),alt:"item.creator",class:"mb-0! w-10!"},null,8,P),e("div",Q,[e("span",{innerHTML:("toColoredHtml"in o?o.toColoredHtml:g(V))(t.guild_name)},null,8,R),e("span",W," 会长: "+d(t.creator),1)])]),e("p",X,d(t.description),1),e("div",Y,[e("div",Z,[s[1]||(s[1]=e("span",{class:"text-xs text-gray-400"},"评分",-1)),e("span",{class:N({"text-teal-500":c===2,"text-indigo-500":c===1,"text-rose-500":c===0})},d(t.score),3)]),e("div",ee,[s[2]||(s[2]=e("span",{class:"text-xs text-gray-400"},"等级",-1)),e("span",null,d(t.level),1)]),e("div",se,[s[3]||(s[3]=e("span",{class:"text-xs text-gray-400"},"会员",-1)),e("span",null,d(t.member_count),1)]),e("div",te,[s[4]||(s[4]=e("span",{class:"text-xs text-gray-400"},"活跃",-1)),e("span",null,d(t.prosperity_degree),1)]),e("div",ne,[s[5]||(s[5]=e("span",{class:"text-xs text-gray-400"},"资金",-1)),e("span",null,d(t.money),1)])])])]))),256))])])):O("",!0)}}),ce=Object.assign(le,{__name:"Guild"});export{ce as default};
