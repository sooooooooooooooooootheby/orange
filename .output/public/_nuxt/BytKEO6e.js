import{u as M}from"./kNtJjcZQ.js";import{C as A,I as F,af as S,d as $,f as D,M as h,e as v,h as e,t as g,F as I,a4 as B,n as G}from"#entry";const O=a=>{const i=new Date(a),d=t=>t.toString().padStart(2,"0"),x=i.getFullYear(),p=d(i.getMonth()+1),u=d(i.getDate()),l=d(i.getHours()),s=d(i.getMinutes());return`${x}/${p}/${u} ${l}:${s}`};function N(a){if(typeof a!="string"||!a)return"";const i=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null,d=[],x=new Map;if(i){const r=i.segment(a);for(const n of r)d.push({index:n.index,text:n.segment}),x.set(n.index,n.segment)}else{let r=0;for(const n of Array.from(a))x.set(r,n),d.push({index:r,text:n}),r+=n.length}let p=null,u=!1,l=!1,s=!1,t=!1,f=null;const w=[],C=r=>r.replace(/[&<>"']/g,n=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[n]),b=r=>{const n=[];r&&n.push(`color:${r}`),u&&n.push("font-weight:700"),l&&n.push("font-style:italic");const m=[];return s&&m.push("underline"),t&&m.push("line-through"),m.length&&n.push(`text-decoration:${m.join(" ")}`),n.length?` style="${n.join(";")}"`:""},T=r=>/^[0-9a-fA-F]$/.test(r);let o=0;const _=a.length;for(;o<_;){const r=a[o];if(r==="&"&&o+8<=_&&a[o+1]==="#"){const c=a.slice(o+2,o+8);if(/^[0-9a-fA-F]{6}$/.test(c)){f=`#${c.toLowerCase()}`,o+=8;continue}}if(r==="&"&&o+14<=_&&a[o+1]==="x"){let c=!0,k="";for(let y=0;y<6;y++){const L=a[o+2+y*2],H=a[o+3+y*2];if(L!=="&"||!T(H)){c=!1;break}k+=H}if(c){p=`#${k.toLowerCase()}`,o+=14;continue}}if(r==="&"&&o+1<_){const c=a[o+1].toLowerCase();if(["l","o","n","m","r"].includes(c)){c==="r"?(p=null,u=l=s=t=!1):c==="l"?u=!0:c==="o"?l=!0:c==="n"?s=!0:c==="m"&&(t=!0),o+=2;continue}}const n=x.get(o);if(n==null){const c=C(a[o]);w.push(`<span${b(p)}>${c}</span>`),o+=1,f=null;continue}const m=f||p;f=null;const j=C(n);w.push(`<span${b(m)}>${j}</span>`),o+=n.length}return`<span class="mc-colored">${w.join("")}</span>`}const V={key:0,class:"mx-auto mb-12 max-w-2xl"},q={class:"mb-2 flex items-center justify-between"},z={class:"text-xs text-gray-400"},E={class:"flex flex-col gap-3"},Y={class:"bg-default border-default flex flex-col gap-1 rounded-lg border-1 px-3 py-2"},J={class:"flex items-center gap-2"},K=["src"],P={class:"flex flex-col justify-center"},Q=["innerHTML"],R={class:"text-sm text-gray-600"},U={class:"text-sm text-gray-600"},W={class:"flex w-full"},X={class:"flex w-1/5 flex-col gap-0.5"},Z={class:"flex w-1/5 flex-col gap-0.5"},ee={class:"flex w-1/5 flex-col gap-0.5"},se={class:"flex w-1/5 flex-col gap-0.5"},te={class:"flex w-1/5 flex-col gap-0.5"},ne=A({__name:"guild",async setup(a){let i,d;const x=(l,s,t,f)=>l*1e3+s*.1+t*1+f*100,p=F(()=>u.value?.ranking.sort((l,s)=>s.score-l.score)),{data:u}=([i,d]=S(async()=>M("mountains",async()=>{const l=await $fetch("https://api.s22y.moe/lodestar/api/guild");return{ranking:l.data.map(t=>({...t,score:x(t.level,t.prosperity_degree,t.money,t.member_count)})),time:l.cacheTime}})),i=await i,d(),i);return(l,s)=>h(u)?(v(),$("div",V,[e("div",q,[s[0]||(s[0]=e("span",null,"排名",-1)),e("span",z,"更新于 "+g(("handleTime"in l?l.handleTime:h(O))(h(u).time)),1)]),e("div",E,[(v(!0),$(I,null,B(h(p),(t,f)=>(v(),$("div",null,[e("div",Y,[e("div",J,[e("img",{src:`https://mc-heads.net/head/${t.creator}`,alt:"item.creator",class:"mb-0! w-10!"},null,8,K),e("div",P,[e("span",{innerHTML:("toColoredHtml"in l?l.toColoredHtml:h(N))(t.guild_name)},null,8,Q),e("span",R," 会长: "+g(t.creator),1)])]),e("p",U,g(t.description),1),e("div",W,[e("div",X,[s[1]||(s[1]=e("span",{class:"text-xs text-gray-400"},"评分",-1)),e("span",{class:G({"text-teal-500":f===2,"text-indigo-500":f===1,"text-rose-500":f===0})},g(t.score),3)]),e("div",Z,[s[2]||(s[2]=e("span",{class:"text-xs text-gray-400"},"等级",-1)),e("span",null,g(t.level),1)]),e("div",ee,[s[3]||(s[3]=e("span",{class:"text-xs text-gray-400"},"会员",-1)),e("span",null,g(t.member_count),1)]),e("div",se,[s[4]||(s[4]=e("span",{class:"text-xs text-gray-400"},"活跃",-1)),e("span",null,g(t.prosperity_degree),1)]),e("div",te,[s[5]||(s[5]=e("span",{class:"text-xs text-gray-400"},"资金",-1)),e("span",null,g(t.money),1)])])])]))),256))])])):D("",!0)}}),ae=Object.assign(ne,{__name:"Guild"});export{ae as default};
